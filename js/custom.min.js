// Simplified Fillow Module for Web Interface Management
const Fillow = (function() {
    "use strict";

    // Basic screen dimensions
    const screenDimensions = {
        width: window.innerWidth,
        height: window.innerHeight
    };

    // Hide preloader after page load
    function handlePreloader() {
        setTimeout(() => {
            document.getElementById('preloader')?.remove();
            document.getElementById('main-wrapper')?.classList.add('show');
        }, 500);
    }

    // Toggle navigation menu
    function handleNavigation() {
        const navControl = document.querySelector(".nav-control");
        const mainWrapper = document.getElementById('main-wrapper');
        const hamburger = document.querySelector(".hamburger");

        if (navControl) {
            navControl.addEventListener('click', () => {
                mainWrapper?.classList.toggle("menu-toggle");
                hamburger?.classList.toggle("is-active");
            });
        }
    }

    // Mark current active menu item
    function handleCurrentActive() {
        const currentLocation = window.location.href;
        const menuLinks = document.querySelectorAll("ul#menu a");

        menuLinks.forEach(link => {
            if (link.href === currentLocation) {
                link.classList.add("mm-active");
                link.parentElement?.classList.add("mm-active");
                link.closest('li')?.classList.add("mm-show", "mm-active");
            }
        });
    }

    // Inisialisasi plugin select dengan tampilan yang lebih baik
    function handleNiceSelect() {
        if ($('.default-select').length) {
            $('.default-select').niceSelect();
        }
    }

    // Public methods
    return {
        // Initialize main functions when document is ready
        init: function() {
            handleNavigation();
            handleCurrentActive();
            handleNiceSelect();
        },
        // Load functions when page is fully loaded
        load: function() {
            handlePreloader();
        }
    };
})();

// Initialize Fillow module
document.addEventListener('DOMContentLoaded', () => {
    Fillow.init();
});

// Run load functions when window is fully loaded
window.addEventListener('load', () => {
    Fillow.load();
});